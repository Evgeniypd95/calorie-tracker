# Calorie Tracker - Product Guide

Welcome to Calorie Tracker, your intelligent companion for managing nutrition and achieving your health goals!

## What is Calorie Tracker?

Calorie Tracker is a smart nutrition tracking app that makes logging meals effortless. Instead of manually looking up every food item, our app uses artificial intelligence to understand what you ate and automatically calculate calories and macronutrients. You can type, speak, or even take a photo of your meal!

## Getting Started

### Creating Your Account

1. When you first open the app, you'll see the login screen
2. If you're new, tap "Don't have an account? Sign Up"
3. Enter your email address and create a password
4. Once signed up, you'll automatically be logged in and ready to start tracking

### Logging In

Simply enter your email and password to access your account from any device.

## Main Features

### 1. My Meals (Dashboard)

This is your home screen where you can see all your tracked meals and daily nutrition summary.

**Calendar Navigation**
- At the top, you'll see a scrollable calendar showing dates from the past week to the next week
- The current day is highlighted in purple
- Tap any date to view meals from that day
- The calendar automatically centers on today when you open the app

**Daily Summary Card**
- Shows your total calories for the selected day in large, easy-to-read numbers
- Displays macronutrient breakdown:
  - **Protein** (red indicator) - measured in grams
  - **Carbs** (green indicator) - measured in grams
  - **Fat** (orange indicator) - measured in grams

**Your Meals List**
- Each meal shows:
  - Meal type (Breakfast, Lunch, Dinner, or Snack)
  - Time it was logged
  - Description of what you ate
  - Complete nutritional breakdown
- Delete any meal by tapping the red trash icon
- The plus button at the bottom right takes you to log a new meal

**Refreshing**
- Pull down on the screen to refresh and see your latest meals

### 2. Log a Meal

This is where the magic happens! You have multiple ways to log your meals:

**Search Previous Meals**
- At the top, use the search bar to find meals you've logged before
- See your recent meals displayed as cards
- Tap any meal to reuse it - perfect for meals you eat regularly!

**Method 1: Type Your Meal**
- Simply type what you ate in the text box (e.g., "chicken breast 200g, rice 150g, broccoli")
- The more specific you are with quantities, the more accurate the results

**Method 2: Voice Input**
- Tap the microphone icon to speak your meal
- Say something like "I had two scrambled eggs, a slice of toast with butter, and an orange"
- The app will transcribe your speech in real-time
- Tap the microphone again to stop recording

**Method 3: Photo of Your Meal**
- Tap the camera icon to take a photo or choose one from your library
- The AI will analyze the image and describe what it sees
- You can edit the description before parsing if needed

**AI Processing**
- After entering your meal, tap "Parse with AI"
- The artificial intelligence analyzes your description and breaks it down into:
  - Individual food items with quantities
  - Calories per item
  - Protein, carbs, and fat per item
  - Total nutritional values

**Fine-Tuning Results**
- If the AI didn't get something quite right, use the feedback section
- Type or speak what needs to be corrected (e.g., "Add 100g rice" or "Chicken was 200g not 150g")
- Tap "Improve" and the AI will recalculate
- You can delete individual items by tapping the red trash icon next to each item

**Choosing Meal Type**
- Before saving, select whether this was Breakfast, Lunch, Dinner, or Snack
- This helps organize your meals throughout the day

**Saving Your Meal**
- When everything looks correct, tap "Looks Correct"
- The meal is saved to the date you selected (or today if you didn't select a specific date)
- If you want to discard and try again, tap "Start Over"

### 3. Shared Meals (Social Feature)

Connect with friends, family, or your nutritionist to share meal ideas and stay motivated!

**Calendar Navigation**
- Similar to the My Meals screen, use the calendar to browse different dates
- See what your connections ate on any given day

**Viewing Shared Meals**
- Each meal card shows:
  - Who logged the meal (their name/email)
  - Meal type and time
  - Description of the meal
  - Full nutritional breakdown

**Copying Meals**
- Like what you see? Tap "Add to My Day" on any meal
- The meal will be copied to your own log
- Great for getting inspiration or following meal plans from others

**No Connections Yet?**
- If you don't see any meals, you need to add connections first
- Go to your Profile to add people using their share codes

### 4. Profile & Connections

Manage your account and social connections here.

**Your Share Code**
- Every user gets a unique share code (format: FIT-XXXXX)
- This code is displayed prominently at the top
- Share this code with people you want to connect with

**Sharing Your Code**
- **Copy Button**: Copies your code to the clipboard so you can paste it anywhere
- **Share Button**: Opens your device's share menu to send via text, email, social media, etc.

**Adding Connections**
- Enter someone else's share code in the "Add Connection" section
- The code format is FIT-XXXXX (letters and numbers)
- Tap "Add Connection" to follow them
- Once connected, you'll see their meals in the Shared Meals tab

**Managing Connections**
- View all your connections in the list
- See their email and share code
- Remove any connection by tapping the red trash icon

**Logging Out**
- Tap the logout icon in the top-right corner to sign out
- You can log back in anytime with your email and password

## Tips for Best Results

### Writing Meal Descriptions

**Be Specific**
- Include quantities when possible: "200g chicken" instead of just "chicken"
- Mention cooking methods: "grilled salmon" vs "fried salmon"
- List ingredients separately for mixed dishes

**Good Examples**
- "Grilled chicken breast 200g, brown rice 150g, steamed broccoli 100g"
- "Two scrambled eggs, whole wheat toast with 1 tablespoon peanut butter, medium banana"
- "Caesar salad with grilled chicken, romaine lettuce, parmesan cheese, croutons, dressing"

### Using Voice Input

- Speak clearly and at a normal pace
- List items one by one
- Pause briefly between different food items
- Include "and" between items helps the AI understand

### Taking Photos

- Take photos in good lighting
- Get all the food in frame
- Photos work best for common, recognizable foods
- After AI analysis, always review and adjust the description if needed

### Building Your Meal Library

- The more you log, the faster it gets
- Your recent and frequently logged meals appear for quick selection
- Use the search feature to find meals you've logged before
- Consistent naming helps you find meals faster

## Understanding Your Nutrition Data

### Calories
Your total energy intake from food, measured in kilocalories (kcal). This is the main metric most people track for weight management.

### Macronutrients

**Protein**
- Essential for muscle building and repair
- Measured in grams (g)
- Found in meat, fish, eggs, dairy, beans, etc.

**Carbohydrates (Carbs)**
- Your body's primary energy source
- Measured in grams (g)
- Found in grains, fruits, vegetables, sugars, etc.

**Fat**
- Important for hormone production and nutrient absorption
- Measured in grams (g)
- Found in oils, butter, nuts, fatty fish, avocados, etc.

## Frequently Asked Questions

**How accurate is the AI?**
The AI is trained on extensive nutritional databases and gets more accurate with detailed descriptions. Always review the results and use the feedback feature to improve accuracy. Include weights/measurements for best results.

**Can I edit a meal after saving?**
Currently, you need to delete the meal and log it again if you want to make changes. Make sure everything looks correct before tapping "Looks Correct".

**What if I can't find a previous meal?**
Use the search bar in the Log Meal screen. Try searching for key ingredients or meal types. The search looks through your meal descriptions.

**Can my connections see all my meals?**
Yes, when you connect with someone using share codes, you can both see each other's meals. Only connect with people you trust and want to share your nutrition journey with.

**Is my data private?**
Your meals are private unless you share your code with someone. You control who can see your meals by managing your connections. Your data is securely stored and only shared with people you explicitly connect with.

**What happens if I log a meal for the wrong date?**
Select the correct date on the calendar in the Dashboard before tapping the plus button to log a meal. The meal will be logged for the date that was selected.

**Can I use this offline?**
The app requires an internet connection to use the AI features for parsing meals and to sync your data. Make sure you're connected to WiFi or cellular data.

**What if the voice recognition isn't working?**
Make sure you've granted microphone permissions to the app. On some browsers (web version), voice recognition may not be supported - try Chrome or Edge. On mobile, check your device settings to ensure microphone access is enabled.

**Can I track water or supplements?**
Currently, the app focuses on meals and food. You can include beverages in your meal descriptions (e.g., "coffee with milk and sugar"), but there's no separate tracker for water or supplements.

**How do I change my password or email?**
Account management features are coming soon. For now, if you need to change account details, please contact support.

---

## Technical Setup & Deployment

This section is for developers who want to run, build, and deploy the app.

### Prerequisites

- Node.js (v16 or higher)
- npm or yarn
- Firebase CLI
- Xcode (for iOS builds, macOS only)
- Apple Developer Account (for TestFlight and App Store distribution)
- Expo account

### Initial Setup

1. **Clone the repository and install dependencies**
```bash
cd calorie-tracker
npm install
```

2. **Set up environment variables**
```bash
# Create .env file with your Firebase and Gemini API credentials
cp .env.example .env
# Edit .env and add your actual credentials
```

3. **Install Firebase CLI globally**
```bash
npm install -g firebase-tools
```

4. **Login to Firebase**
```bash
firebase login
```

5. **Install EAS CLI (for builds)**
```bash
npm install -g eas-cli
```

6. **Login to Expo**
```bash
eas login
```

### Running the App Locally

**Start development server**
```bash
npm start
# or
expo start
```

**Run on iOS Simulator**
```bash
npm run ios
# or
expo run:ios
```

**Run on Android Emulator**
```bash
npm run android
# or
expo run:android
```

**Run on Web**
```bash
npm run web
# or
expo start --web
```

**Clear cache and restart**
```bash
expo start -c
# or
npm start -- --reset-cache
```

### Firebase Deployment

#### Deploy Cloud Functions

```bash
# Navigate to functions directory
cd firebase/functions

# Install dependencies
npm install

# Set environment variables for functions
firebase functions:config:set gemini.api_key="YOUR_GEMINI_API_KEY"

# Deploy all functions
firebase deploy --only functions

# Deploy specific function
firebase deploy --only functions:parseMeal
```

#### Deploy Firestore Rules

```bash
# Deploy security rules
firebase deploy --only firestore:rules

# Deploy both rules and indexes
firebase deploy --only firestore
```

#### Deploy Everything

```bash
# Deploy functions, rules, and indexes in one command
firebase deploy
```

#### View Function Logs

```bash
# View recent logs
firebase functions:log

# Stream logs in real-time
firebase functions:log --only parseMeal
```

### Building for iOS

#### Local Development Build (iOS Simulator)

```bash
# Build for iOS simulator
eas build --profile development --platform ios

# Or use Xcode directly
npx expo run:ios
```

#### Internal Testing Build (TestFlight)

```bash
# Configure app.json/app.config.js with correct bundle identifier and version

# Build for TestFlight
eas build --profile preview --platform ios

# Or build for production (TestFlight + App Store)
eas build --profile production --platform ios
```

**After build completes:**
1. Download the `.ipa` file from the EAS build dashboard
2. Upload to App Store Connect using Transporter app or Xcode
3. Process will take 5-15 minutes
4. Distribute to TestFlight testers in App Store Connect

#### Production Build (App Store Submission)

```bash
# Ensure version is incremented in app.json
# Update buildNumber and version

# Create production build
eas build --profile production --platform ios

# Submit directly to App Store (alternative method)
eas submit --platform ios
```

**Manual submission steps:**
1. Build completes on EAS servers
2. Download `.ipa` or use EAS submit
3. Open App Store Connect
4. Create new version or select existing app
5. Upload build via Transporter or Xcode Organizer
6. Fill in app metadata, screenshots, privacy info
7. Submit for review

#### Using Xcode for Local Builds

```bash
# Generate iOS native project
npx expo prebuild --platform ios

# Open in Xcode
open ios/calorietracker.xcworkspace

# In Xcode:
# 1. Select your development team
# 2. Choose target device or "Any iOS Device (arm64)"
# 3. Product > Archive
# 4. Distribute App > App Store Connect
```

### Building for Android

#### Development Build

```bash
# Build APK for development
eas build --profile development --platform android

# Local build
npx expo run:android
```

#### Internal Testing Build

```bash
# Build AAB for Google Play internal testing
eas build --profile preview --platform android
```

#### Production Build (Google Play)

```bash
# Create production build
eas build --profile production --platform android

# Submit to Google Play
eas submit --platform android
```

### EAS Build Configuration

Your `eas.json` should look like this:

```json
{
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal",
      "ios": {
        "simulator": false
      }
    },
    "production": {
      "ios": {
        "buildConfiguration": "Release"
      },
      "android": {
        "buildType": "app-bundle"
      }
    }
  },
  "submit": {
    "production": {
      "ios": {
        "appleId": "your-apple-id@example.com",
        "ascAppId": "your-app-store-connect-app-id",
        "appleTeamId": "your-apple-team-id"
      },
      "android": {
        "serviceAccountKeyPath": "./path-to-service-account.json",
        "track": "internal"
      }
    }
  }
}
```

### App Store Requirements

**iOS (App Store Connect)**
1. App Icons (1024x1024px)
2. Screenshots for all required device sizes
3. Privacy policy URL
4. App description and keywords
5. Support URL
6. Version number and build number
7. Age rating and content descriptors

**Android (Google Play Console)**
1. App Icon (512x512px)
2. Feature Graphic (1024x500px)
3. Screenshots (min 2 per device type)
4. Privacy Policy URL
5. App description (short & full)
6. Content rating questionnaire
7. Target SDK version (must meet Google's requirements)

### Version Management

**Increment version before each build:**

Edit `app.json` or `app.config.js`:
```json
{
  "expo": {
    "version": "1.0.1",
    "ios": {
      "buildNumber": "2"
    },
    "android": {
      "versionCode": 2
    }
  }
}
```

**Rules:**
- `version`: User-facing version (e.g., "1.0.1")
- `buildNumber` (iOS): Increments with each build
- `versionCode` (Android): Integer that increments with each build

### Troubleshooting

**Firebase Connection Issues**
```bash
# Check Firebase project
firebase projects:list

# Switch project
firebase use your-project-id

# Re-deploy rules
firebase deploy --only firestore:rules
```

**Build Failures**
```bash
# Clear EAS build cache
eas build --clear-cache

# Clear local cache
rm -rf node_modules
npm install
```

**iOS Signing Issues**
- Ensure Apple Developer account is active
- Check provisioning profiles in EAS dashboard
- Verify bundle identifier matches App Store Connect

**Android Keystore Issues**
- EAS manages keystores automatically
- For custom keystore, configure in `eas.json`

### Useful Commands Reference

```bash
# Check EAS build status
eas build:list

# View specific build
eas build:view [build-id]

# Configure EAS project
eas build:configure

# Update over-the-air (OTA)
eas update

# View environment info
npx expo-env-info

# Check for issues
npx expo-doctor

# Upgrade Expo SDK
npx expo install expo@latest

# Upgrade all dependencies
npx expo install --fix
```

### CI/CD Integration

For automated builds with GitHub Actions or similar:

```yaml
# Example GitHub Actions workflow
name: EAS Build
on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - run: npm install
      - run: npm install -g eas-cli
      - run: eas build --platform ios --non-interactive
        env:
          EXPO_TOKEN: ${{ secrets.EXPO_TOKEN }}
```

---

## Privacy & Security

- Your account is protected with secure email/password authentication
- All data is encrypted and stored securely in the cloud
- You control who sees your meals through the share code system
- We never share your personal data with third parties
- You can delete any meal at any time
- Disconnecting from someone immediately stops them from seeing your new meals

## Getting Help

If you experience any issues or have questions:
- Check this guide for common questions
- Make sure you have the latest version of the app
- Try logging out and back in if something isn't working
- Report issues through your app store or contact support

---

**Start Your Nutrition Journey Today!**

Whether you're trying to lose weight, build muscle, maintain a healthy lifestyle, or simply understand what you're eating better - Calorie Tracker makes it easy and intuitive. The combination of AI-powered meal parsing, voice input, photo analysis, and social sharing creates a seamless experience that fits into your daily life.

Happy tracking!
